{"version":3,"file":"SendResetMailPage.1ebdc265fc3bd7452fcd.js","sources":["webpack:////./public/app/core/components/ForgottenPassword/ForgottenPassword.tsx","webpack:////./public/app/core/components/ForgottenPassword/SendResetMailPage.tsx"],"sourcesContent":["import React, { FC, useState } from 'react';\nimport { Form, Field, Input, Button, Legend, Container, useStyles, HorizontalGroup, LinkButton } from '@grafana/ui';\nimport { getBackendSrv } from '@grafana/runtime';\nimport { css } from 'emotion';\nimport { GrafanaTheme } from '@grafana/data';\nimport config from 'app/core/config';\n\ninterface EmailDTO {\n  userOrEmail: string;\n}\n\nconst paragraphStyles = (theme: GrafanaTheme) => css`\n  color: ${theme.colors.formDescription};\n  font-size: ${theme.typography.size.sm};\n  font-weight: ${theme.typography.weight.regular};\n  margin-top: ${theme.spacing.sm};\n  display: block;\n`;\n\nexport const ForgottenPassword: FC = () => {\n  const [emailSent, setEmailSent] = useState(false);\n  const styles = useStyles(paragraphStyles);\n  const loginHref = `${config.appSubUrl}/login`;\n\n  const sendEmail = async (formModel: EmailDTO) => {\n    const res = await getBackendSrv().post('/api/user/password/send-reset-email', formModel);\n    if (res) {\n      setEmailSent(true);\n    }\n  };\n\n  if (emailSent) {\n    return (\n      <div>\n        <p>带有重置链接的电子邮件已发送到该邮箱地址。您应该尽快收到。</p>\n        <Container margin=\"md\" />\n        <LinkButton variant=\"primary\" href={loginHref}>\n          返回登陆\n        </LinkButton>\n      </div>\n    );\n  }\n  return (\n    <Form onSubmit={sendEmail}>\n      {({ register, errors }) => (\n        <>\n          <Legend>重设密码</Legend>\n          <Field\n            label=\"用户\"\n            description=\"输入您的信息以获取发送给您的重置链接\"\n            invalid={!!errors.userOrEmail}\n            error={errors?.userOrEmail?.message}\n          >\n            <Input placeholder=\"邮箱或用户名\" name=\"userOrEmail\" ref={register({ required: true })} />\n          </Field>\n          <HorizontalGroup>\n            <Button>发送重置邮件</Button>\n            <LinkButton variant=\"link\" href={loginHref}>\n              返回登陆\n            </LinkButton>\n          </HorizontalGroup>\n\n          <p className={styles}>您忘记了用户名或电子邮件吗？请与您的Grafana管理员联系。</p>\n        </>\n      )}\n    </Form>\n  );\n};\n","import React, { FC } from 'react';\n\nimport { LoginLayout, InnerBox } from '../Login/LoginLayout';\nimport { ForgottenPassword } from './ForgottenPassword';\n\nexport const SendResetMailPage: FC = () => (\n  <LoginLayout>\n    <InnerBox>\n      <ForgottenPassword />\n    </InnerBox>\n  </LoginLayout>\n);\n\nexport default SendResetMailPage;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AAKA;AAAA;AAAA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAAA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AAGA;AAAA;AACA;AAAA;AAAA;AAKA;AACA;AAAA;AACA;AAAA;AACA;AACA;AADA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAKA;AAAA;AAlBA;AAuBA;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AAAA;AAAA;AAQA;;;;A","sourceRoot":""}